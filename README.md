modx2bitrix
===========

Экспорт документов из CMS MODx Evo в CMF 1C-Bitrix:Управление сайтом.

##Установка
Сам скрипт представляет из себя обычный сниппет для системы MODx. Сниппет использует чанк для шаблонизации создаваемого файла.
После установки сниппета и чанка запускаем сниппет из документа и радуемся!

Установка не займет много времени и сил)

### 1. Создание сниппета
Заходим в систему MODx, проходим атворизацию и далее "Элементы -> Управление элементами -> Сниппеты".
Кликаем по "Новый сниппет"
В поле "Название сниппета" пишем modx2bitrix
В поле " Код сниппета (php)" вставляем код из файла modx2bitrix.php
Далее "Сохранить".

### 2. Создание чанка
Переходим "Элементы -> Управление элементами -> Чанки".
Кликаем по "Новый чанк"
Поле "Название чанка" указываем имя чанка. Имя поумолчанию "m2b_page".
Поле "Код чанка (html)" шаблон для битрикса поумолчанию
```
<?
require($_SERVER["DOCUMENT_ROOT"]."/bitrix/header.php");
$APPLICATION->SetTitle("[+pagetitle+]");

$APPLICATION->SetPageProperty("keywords", "[+description+]");
$APPLICATION->SetPageProperty("description", "[+longtitle+]");
?>

[+content+]

<?require($_SERVER["DOCUMENT_ROOT"]."/bitrix/footer.php");?>
```
Нажимаем "Сохранить"

### 3. Запуск сниппета
Создаем новый документ и вставляем вызов сниппета

```
[!modx2bitrix? &startId=`6` &path=`/export/` !]
```

Далее просто переходим к документу и наблюдаем статистику работы сниппета.


### Параметры сниппета
* startId - Откуда начинать, по умолчанию 0
* depth   - Уровень вложенности, по умочланию 5
* tpl - Имя чанка с кодом шаблона для создания файла, по умолчанию "m2b_page" 
* rewrite - Если файл с документом уже будет находиться на диске, перезаписывать его или нет, по умочанию true
* ignore  - Список документов (через запятую) которые будут проигнорированы
* path - Путь относительно корня сайта, куда будут сохраняться новые файлы.

Что бы создать меню для файлов которые вы экспортировали, воспользуйтесь компонентом для Битрикса
https://github.com/AndreyGo/BitrixCreateMenu
